{% if books|length > 0 %}
	{% for book in books %}
		<section class="bookCard">
			<h4 class="titleBook">
				<a href="{{ path('book_show', {slug: book.slug}) }}">{{ book.title|u.truncate(18, '...') }}</a>
			</h4>
			<div class="authorBook">
				<a href="">{{ book.author }}</a>
			</div>
			<div class="categoryBook">{{ book.category }}</div>
			<div class="publisherBook">{{ book.publisher }}</div>
			<div class="languageBook">Langue:
				{{ book.language }}</div>
			<div class="formatBook">Format:
				{{ book.format }}</div>
			<div class="stateBook">État:
				{{ book.state }}</div>
			<div class="locationBook">
				<img src="{{ asset('/img/locationIcon.svg') }}" class="locationIcon" alt="location Icon"/>
				<span>{{ book.user.city }}</span>
			</div>
			<p class="ownerBook">Propriétaire:
				{{ book.user.pseudo }}
			</p>
			<div class="align-self-center">
				<a class="btn btn-outline-success exchangeButton" href="{{ path('book_validation_confirm_exchange', {'id': book.id}) }}" role="button">Échanger</a>
			</div>
		</section>
	{% endfor %}
{% else %}
	<div class="divConnectedBookStockAddABook">
		<p>Aucun livre n'est disponible...</p>
	</div>
{% endif %}

{# We create custom variables #}
{% set queryParams = app.request.query.all %}
{% set queryString = queryParams|filter((v, k) => k != "page" and k != "ajax")|url_encode %}


{% set pages = (total / limit)|round(0, 'ceil') %}

<nav class="page-navigation" aria-label="Page navigation">
	<ul class="pagination">
		<li class="page-item {{ (page == 1) ? 'disabled' : ''}}">
			<a class="page-link" href="?page=1&{{queryString}}">
				<i class="bi bi-chevron-double-left"></i>
			</a>
		</li>

		<li class="page-item {{ (page == 1) ? 'disabled' : ''}}">
			<a class="page-link" href="{{ (page > 1) ? '?page=' ~ (page - 1) : '' }}&{{queryString}}">
				<i class="bi bi-chevron-left"></i>
			</a>
		</li>

		{% for item in 1..((total / limit)|round(0, 'ceil')) %}
			<li class="page-item {{ (page == item) ? 'active' : ''}}">
				<a class="page-link" href="?page={{ item }}&{{queryString}}">{{ item }}</a>
			</li>
		{% endfor %}
		<li class="page-item {{ (page == pages) ? 'disabled' : ''}}">
			<a class="page-link" href="{{ (page < pages) ? '?page=' ~ (page + 1) : '' }}&{{queryString}}">
				<i class="bi bi-chevron-right"></i>
			</a>
		</li>

		<li class="page-item {{ (page == pages) ? 'disabled' : ''}}">
			<a class="page-link" href="?page={{ pages }}&{{queryString}}">
				<i class="bi bi-chevron-double-right"></i>
			</a>
		</li>
	</ul>
</nav>
