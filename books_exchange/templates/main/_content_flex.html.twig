{% if books|length > 0 %}
	{% for book in books %}
    <div class="card col-5">
        <div class="row g-0">
            <div class="card-picture col-md-5">
                {% for image in book.images %}
                    <img src="{{ asset('/uploads/' ~ image.name)|imagine_filter('books') }}" alt="Couverture du livre {{book.title}}." class="card-img">
                {% endfor %}
            </div>
            <div class="col-md-7">
                <div class="card-body">
                    <h5 class="card-title">
                        <a href="{{ path('book_show', {slug: book.slug}) }}">{{ book.title|u.truncate(18, '...') }}</a>
                    </h5>
                    <div class="card-header">
                        <a href="">{{ book.author }}</a>
                    </div>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">{{ book.category }}</li>
                        <li class="list-group-item">{{ book.publisher }}</li>
                        <li class="list-group-item">Langue:
                            {{ book.language }}</li>
                        <li class="list-group-item">Format:
                            {{ book.format }}</li>
                        <li class="list-group-item stateBook">État:
                            {{ book.state }}</li>
                        <li class="list-group-item locationBook">
                            <img src="{{ asset('/img/locationIcon.svg') }}" class="locationIcon" alt="location Icon"/>
                            <span>{{ book.user.city }}</span>
                        </li>
                        <li class="list-group-item ownerBook">Propriétaire:
                            {{ book.user.pseudo }}</li>
                    </ul>
                </div>
                <div class="divButtonExchangeCenter">
                    <a class="btn btn-outline-success exchangeButton" href="{{ path('book_validation_confirm_exchange', {'id': book.id}) }}" role="button">Échanger</a>
                </div>
            </div>
        </div>
    </div>
	{% endfor %}
{% else %}
	<div class="divConnectedBookStockAddABook">
		<p>Aucun livre n'est disponible...</p>
	</div>
{% endif %}

{# We create custom variables #}
{% set queryParams = app.request.query.all %}
{% set queryString = queryParams|filter((v, k) => k != "page" and k != "ajax")|url_encode %}


{% set pages = (total / limit)|round(0, 'ceil') %}

<nav class="page-navigation" aria-label="Page navigation">
	<ul class="pagination">
		<li class="page-item {{ (page == 1) ? 'disabled' : ''}}">
			<a class="page-link" href="?page=1&{{queryString}}">
				<i class="bi bi-chevron-double-left"></i>
			</a>
		</li>
		<li class="page-item {{ (page == 1) ? 'disabled' : ''}}">
			<a class="page-link" href="{{ (page > 1) ? '?page=' ~ (page - 1) : '' }}&{{queryString}}">
				<i class="bi bi-chevron-left"></i>
			</a>
		</li>
		{% for item in 1..((total / limit)|round(0, 'ceil')) %}
			<li class="page-item {{ (page == item) ? 'active' : '' }}">
				<a class="page-link" href="?page={{ item }}&{{queryString}}">{{ item }}</a>
			</li>
		{% endfor %}
		<li class="page-item {{ (page == pages) ? 'disabled' : ''}}">
			<a class="page-link" href="{{ (page < pages) ? '?page=' ~ (page + 1) : '' }}&{{queryString}}">
				<i class="bi bi-chevron-right"></i>
			</a>
		</li>

		<li class="page-item {{ (page == pages) ? 'disabled' : ''}}">
			<a class="page-link" href="?page={{ pages }}&{{queryString}}">
				<i class="bi bi-chevron-double-right"></i>
			</a>
		</li>
	</ul>
</nav>